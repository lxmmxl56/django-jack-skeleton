{% extends "account.base.html" %}
{% load i18n %}

{% block contents %}
<div class="row">
    <div class="col-auto">
        <h1 class="fs-2">{% block title %}{% trans "Enable Two-Factor Authentication" %}{% endblock %}</h1>
        {% if wizard.steps.current == 'welcome' %}
        <p>{% blocktrans trimmed %}Please follow the steps in this wizard to enable two-factor authentication.{% endblocktrans %}</p>
        {% elif wizard.steps.current == 'method' %}
        <p>{% blocktrans trimmed %}Please select the authentication method you would like to use.{% endblocktrans %}</p>
        {% elif wizard.steps.current == 'generator' %}
        <p>{% blocktrans trimmed %}Please scan the QR code below with an authentication app:</p>
        <ul>
            <li><a href="https://authy.com/download/" target="_blank">Authy</a></li>
            <li>Google Authenticator <small><a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank">Google Play</a>ãƒ»<a href="https://apps.apple.com/us/app/google-authenticator/id388497605" target="_blank">App Store</a></small></li>
            <li><a href="https://www.microsoft.com/en-us/security/mobile-authenticator-app" target="_blank">Microsoft Authenticator</a></li>
        </ul>
        <p>Enter the token generated by the app.</p>
        {% endblocktrans %}
        <p><img src="{{ QR_URL }}" alt="QR Code" /></p>
        {% elif wizard.steps.current == 'email' %}
        <p>{% blocktrans trimmed %}Please enter the email address where you would like to receive your authentication tokens.</p>
        <p>This address will be validated in the next step.
        {% endblocktrans %}</p>
        {% elif wizard.steps.current == 'validation' %}
        {% if challenge_succeeded %}
        {% if device.method == 'email' %}
        <p>{% blocktrans trimmed %}Please enter the token sent to your email.{% endblocktrans %}</p>
        {% endif %}
        {% else %}
        <p class="alert alert-warning" role="alert">{% blocktrans trimmed %}We've encountered an issue with the selected authentication method. Please go back and verify that you entered your information correctly, try again, or use a different authentication method instead. If the issue persists, contact the site administrator.{% endblocktrans %}</p>
        {% endif %}
        {% endif %}

        <form action="" method="post" novalidate>{% csrf_token %}
            {% include "two_factor/_wizard_forms.html" %}

            {# hidden submit button to enable [enter] key #}
            <input type="submit" value="" class="d-none" />

            {% include "two_factor/_wizard_actions.html" %}
        </form>
    </div> <!-- .col-auto -->
</div> <!-- .row -->
{% endblock %}
