{% extends "account.base.html" %}
{% load i18n two_factor %}

{% block title %}{% translate 'Login' %}{% endblock %}

{% block content %}
tf
<div class="container mt-5">

  {% if wizard.steps.current == 'token' %}
    {% if device.method == 'email' %}
    <p>{% blocktrans trimmed %}Please enter the token sent to your email.{% endblocktrans %}</p>
    {% else %}
    <p>{% blocktrans trimmed %}Please enter the token generated by your app.{% endblocktrans %}</p>
    {% endif %}
  {% elif wizard.steps.current == 'backup' %}
  <p>{% blocktrans trimmed %}Please enter one of your backup tokens to login.{% endblocktrans %}</p>
  {% endif %}

  <form method="post" class="mb-5 needs-validation" novalidate>
    {% csrf_token %}
    {% include "two_factor/_wizard_forms.html" %}

    {# hidden submit button to enable [enter] key #}
    <input type="submit" class="d-none">

    {% if other_devices %}
    <p>{% trans "Alternatively, use one of your backup addresses:" %}</p>
    <p>
      {% for other in other_devices %}
      <button name="challenge_device" value="{{ other.persistent_id }}"
      class="btn btn-secondary btn-block" type="submit">
        {{ other|device_action }}
      </button>
      {% endfor %}</p>
    {% endif %}
  {% if backup_tokens %}
  <p>{% trans "Or use a backup token:" %}</p>
  <p>
    <button name="wizard_goto_step" type="submit" value="backup" class="btn btn-secondary btn-block">{% trans "Use Backup Token" %}</button>
  </p>
  {% endif %}
  {% if wizard.steps.current == 'auth' %}
    <div class="row">
        <div class="col-sm">
            <div class="mb-3"><a href="{% url 'password_reset' %}">{% translate 'Forgot your password?' %}</a></div>
            <div class="mb-3"><a href="{% url 'signup' %}">{% translate 'Create an account' %}</a></div>
        </div>
    </div>
  {% endif %}
  {% include "two_factor/_wizard_actions.html" %}
</form>
</div>
{% endblock %}
